## 1 虚拟内存的基本概念
### 1.1 传统存储管理方式的特征

* 一次性：作业一次性装入内存。
* 驻留性：作业被装入内存后，一直驻留在内存中。

### 1.2 局部性原理
* 时间局部性：程序中某条指令一旦执行，不久后该指令可能再次执行。数据被访问，不久后数据可能再次被访问（程序中有大量的循环）
* 空间局部性：一旦访问了某存储单元，不久之后，附近的存储单元也有可能被访问。

### 1.3 虚拟存储器的定义和特征
#### 1.3.1 定义
虚拟内存是计算机系统内存管理的一种技术。它使得应用程序认为它拥有连续的可用的内存（一个连续完整的地址空间），而实际上，它通常是被分隔成多个物理内存碎片，还有部分暂时存储在外部磁盘存储器上，
在需要时进行数据交换。目前，大多数操作系统都使用了虚拟内存，如Windows家族的“虚拟内存”；Linux的“交换空间”等。

#### 1.3.2 特征
* 多次性：作业无需一次性装入内存，允许多次。
* 对换性：作业无需一直驻留内存，允许在运行过程中，进行换进换出。
* 虚拟性：逻辑上扩充内存的容量，用户看到的容量大于实际内存容量。

#### 1.3.4 虚拟内存技术的实现
* 请求分页存储管理

* 请求分段存储管理

* 请求段页式存储管理

  需要以下支持：

* 一定容量的内存和外存

* 页表机制（段表机制），作为数据结构。

* 中断机制：当用户程序要访问的部分尚未调入内存时，产生中断。

* 地址变换机构，逻辑地址到物理地址的变换。

## 2 请求分页管理方式
* 页表机制
* 缺页中断机制
* 地址变换机构

## 3 页面置换算法
* 最佳（OPT）置换算法：选择被淘汰之后不使用的页面，或最长时间内不再被访问的界面。（无法实现的）
* 先进先出（FIFO）置换算法：优先淘汰最早进入内存的页面。
* 最近最久未使用（LRU）置换算法：选择最近最长时间未访问的页面。
* 时钟（CLOCK）置换算法：可以认为是一种最近未使用算法，即逐出的页面都是最近没有使用的那个。我们给每一个页面设置一个标记位u，u=1表示最近有使用u=0则表示该页面最近没有被使用，应该被逐出。

## 4 页面分配策略
### 4.1 驻留集大小
驻留集：指请求分页存储管理中给进程分配的物理内存块的集合。

在采用了虚拟存储技术的系统中，驻留集大小一般小于进程的总大小。如果驻留集太小，会导致缺页频繁，系统要花大量的时间来处理缺页，实际用于进程推进的时间很少。若驻留集太大，又会导致多道程序并发度下降，资源利用率降低。所以应该选择一个合适的驻留集大小。

因此采用三种策略
* 固定分配局部置换：系统为每个进程分配一定数量的物理块，在整个运行期间都不改变。
* 可变分配全局置换：只要某进程发生缺页，都将获得新的物理块。
* 可变分配局部置换：根据缺页的频率来动态地增加或减少进程物理块。

### 4.2 调入页面的时机
* 预调页策略：预测不久之后可能访问到的页面，将他们预先调入内存
* 请求调页策略：进程在运行期间缺页时才将所缺页面调入内存。由这种策略调入的页面一定会被访问到，但是由于每次只能调入一个页，而每次调页都要磁盘I/O操作，因此I/O开销大。

### 4.3 从何处调入页面
#### 4.3.1 对换区空间充足
当系统拥足够的对换区空间：在进程运行前，需将进程相关的数据从文件区复制到对换区。页面的调入、调出都是在内存与对换区之间进行，这样可以保证页面的调入、调出的速度很快。
#### 4.3.2 对换区空间不足
当系统缺少足够的对换区空间：凡是不会被修改的数据都直接从文件区调入，由于这些页面不会被修改，因此换出时不必写回磁盘，下次需要时再从文件区调入即可。对于可能被修改的部分，换出时需要写回磁盘对换区，下次需要时再从对换区调入。
#### 4.3.3 UNIX的调入方式
运行前将进程有关的数据全部放在文件区，故未使用的过的页面都可以从文件区调入。若被使用过的页面需要换出，则写回对换区，下次需要时从对换区调入。

## 5 抖动（颠簸）
在页面置换过程中，频繁进行页面换如换出。

## 6 工作集
某段时间间隔内，进程要访问的页面的集合。