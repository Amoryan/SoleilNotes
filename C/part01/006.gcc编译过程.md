## 1 gcc 编译 4 步骤

### 1.1 预处理 -E

例：gcc -E hello.c -o hello.i

1. 头文件展开： 不检查语法错误，可以展开任意文件。
2. 宏定义替换： 将宏名替换为宏值。
3. 替换注释：变成空行。
4. 展开条件编译 ：根据条件来展开指令。

### 1.2 编译 -S

例：gcc -S hello.i -o hello.s

1. 逐行检查语法错误，是最耗时的过程。
2. 将 C 程序翻译成汇编指令，得到 .s 汇编文件。

### 1.3 汇编 -c

例：gcc -c hello.s -o hello.o

1. 翻译：将汇编指令翻译成对应的 二进制编码。

### 1.4 链接 

例：gcc  hello.o -o hello.exe

1. 数据段合并。
2. 数据地址回填。
3. 库引入。

| 文件后缀 | 含义                  |
| -------- | --------------------- |
| .c       | C 语言文件            |
| .i       | 预处理后的 C 语言文件 |
| .s       | 编译后的汇编文件      |
| .o       | 编译后的目标文件      |



## 2 一步编译

gcc hello.c -o hello